
> client@0.0.0 test
> jest Chat.sessionEvents.test.jsx AstrologerDashboard.inbox.test.jsx --passWithNoTests

watchman warning: Recrawled this watch 15 times, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/wohozo/astroweb' ; watchman watch-project '/Users/wohozo/astroweb'`

FAIL src/__tests__/Chat.sessionEvents.test.jsx
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      1 | import React from 'react';
      2 | import { render, screen, waitFor } from '@testing-library/react';
    > 3 | import { MemoryRouter, Route, Routes } from 'react-router-dom';
        | ^
      4 | import Chat from '../pages/Chat.jsx';
      5 | import AuthContext from '../context/AuthContext';
      6 |

      at Object.<anonymous> (node_modules/react-router/dist/development/index.js:337:31)
      at Object.<anonymous> (node_modules/react-router/dist/development/dom-export.js:40:20)
      at Object.<anonymous> (node_modules/react-router-dom/dist/index.js:38:18)
      at Object.require (src/__tests__/Chat.sessionEvents.test.jsx:3:1)

FAIL src/__tests__/AstrologerDashboard.inbox.test.jsx
  ● AstrologerDashboard Inbox flow › shows pending request in Inbox and navigates only on chat:joined

    TypeError: Cannot destructure property 'user' of '(0 , _react.useContext)(...)' as it is undefined.

      30 |   const [activeTab, setActiveTab] = useState("inbox");
      31 |   const [inboxTab, setInboxTab] = useState("chat"); // 'chat' or 'video'
    > 32 |   const { user } = useContext(AuthContext); // Consuming AuthContext
         |           ^
      33 |   const [profile, setProfile] = useState(null);
      34 |   const [incomingCall, setIncomingCall] = useState(null);
      35 |   const [activeCallRoomId, setActiveCallRoomId] = useState(null);

      at user (src/pages/AstrologerDashboard.jsx:32:11)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/AstrologerDashboard.inbox.test.jsx:63:11)

Test Suites: 2 failed, 2 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        2.425 s
Ran all test suites matching Chat.sessionEvents.test.jsx|AstrologerDashboard.inbox.test.jsx.
