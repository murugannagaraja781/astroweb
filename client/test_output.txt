
> client@0.0.0 test
> jest src/__tests__/AstrologerDashboard.test.jsx

watchman warning: Recrawled this watch 15 times, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/wohozo/astroweb' ; watchman watch-project '/Users/wohozo/astroweb'`

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    [Astrologer] Chat request received: {
      sessionId: 'session_1',
      userId: { _id: 'client_1', name: 'Client Alice' },
      socketId: 'socket_client_1'
    }

      at log (src/pages/AstrologerDashboard.jsx:248:15)

  console.log
    üîî Notification sound played successfully

      at log (src/pages/AstrologerDashboard.jsx:387:19)

  console.log
    üîî Notification sound played successfully

      at log (src/pages/AstrologerDashboard.jsx:387:19)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîî Notification sound played successfully

      at log (src/pages/AstrologerDashboard.jsx:387:19)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîì Audio unlocked

      at log (src/pages/AstrologerDashboard.jsx:1251:17)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    Incoming call request: {
      fromId: 'client_2',
      fromName: 'Client Bob',
      fromSocketId: 'socket_client_2',
      roomId: 'room_123',
      type: 'video'
    }

      at log (src/pages/AstrologerDashboard.jsx:213:15)

  console.log
    üîî Notification sound played successfully

      at log (src/pages/AstrologerDashboard.jsx:387:19)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîî Notification sound played successfully

      at log (src/pages/AstrologerDashboard.jsx:387:19)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîì Audio unlocked

      at log (src/pages/AstrologerDashboard.jsx:1251:17)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîì Audio unlocked

      at log (src/pages/AstrologerDashboard.jsx:1251:17)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Audio ref not ready

      at log (src/pages/AstrologerDashboard.jsx:345:15)

  console.log
    [Astrologer] Using global socket: socket_123

      at log (src/pages/AstrologerDashboard.jsx:134:13)

  console.log
    [Astrologer] Socket connected/reconnected

      at log (src/pages/AstrologerDashboard.jsx:145:18)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    üîì Audio unlocked

      at log (src/pages/AstrologerDashboard.jsx:1251:17)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

  console.log
    Sound played

      at log (src/pages/AstrologerDashboard.jsx:342:29)

FAIL src/__tests__/AstrologerDashboard.test.jsx
  AstrologerDashboard
    ‚úì renders dashboard with user info (139 ms)
    ‚úì connects to socket on mount (22 ms)
    ‚úì shows incoming chat request popup and allows acceptance (56 ms)
    ‚úï shows incoming video request popup and allows acceptance (1061 ms)
    ‚úï offline status toggle works (1052 ms)
    ‚úï Switching tabs changes view (1087 ms)

  ‚óè AstrologerDashboard ‚Ä∫ shows incoming video request popup and allows acceptance

    Found multiple elements by: [data-testid="video-call-component"]

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mdata-testid[39m=[32m"video-call-component"[39m
    [36m>[39m
      [0mVideoCall Component[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mdata-testid[39m=[32m"video-call-component"[39m
    [36m>[39m
      [0mVideoCall Component[0m
    [36m</div>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"container mx-auto"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center mb-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-2xl font-bold"[39m
                    [36m>[39m
                      [0mCosmic Dashboard[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-purple-200"[39m
                    [36m>[39m
                      [0mWelcome back, Master [0m
                      [0mAstro User[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"relative p-2 hover:bg-white/20 rounded-full transition-colors"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mdata-testid[39m=[32m"icon"[39m
                        [36m/>[39m
                      [36m</button>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white/20 backdrop-blur-sm rounded-2xl p-4 border border-white/30"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center justify-between"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center gap-3"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"w-4 h-4 rounded-full bg-green-400 animate-pulse"[39m
                      [36m/>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-semibold"[39m
                      [36m>[39m
                        [0mOnline & Available[0m
                      [36m</span>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-xs bg-green-500/30 px-2 py-1 rounded-full"[39m
                      [36m>[39m
                        [0müîî Incoming notifications enabled[0m
                      [36m</span>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative w-16 h-8 rounded-full cursor-pointer transition-colors duration-300 ease-in-out bg-green-500"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out translate-x-8"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"container mx-auto px-4 -mt-6 mb-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-purple-600"[39m
                  [36m>[39m
                    [0m0[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mPending Requests[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m‚Çπ[0m
                    [0m5,000[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mEarnings[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m4.8[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mRating[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"container mx-auto px-4 pb-20"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-4 gap-4 mb-8"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mOverview[0m
                  [36m</div>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mInbox[0m
                  [36m</div>[39m
                  [0m0[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mCharts[0m
                  [36m</div>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mAstrology[0m
                  [36m</div>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mEarnings[0m
                  [36m</div>[39m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white rounded-3xl shadow-xl p-6 min-h-[400px]"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center gap-3 mb-6"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-xl font-bold text-gray-800"[39m
                    [36m>[39m
                      [0mVideo[0m
                      [0m Call Studio[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"video-call-component"[39m
                  [36m>[39m
                    [0mVideoCall Component[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-3 md:hidden z-40"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-5 gap-2"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative flex flex-col items-center p-2 rounded-xl transition-all text-gray-600"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"icon"[39m
                  [36m/>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs mt-1"[39m
                  [36m>[39m
                    [0mOverview[0m
                  [36m</span>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative flex flex-col items-center p-2 rounded-xl transition-all text-gray-600"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"icon"[39m
                  [36m/>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs mt-1"[39m
                  [36m>[39m
                    [0mInbox[0m
                  [36m</span>[39m
                  [0m0[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative flex flex-col items-center p-2 rounded-xl transition-all text-gray-600"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"icon"[39m
                  [36m/>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs mt-1"[39m
                  [36m>[39m
                    [0mCharts[0m
                  [36m</span>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative flex flex-col items-center p-2 rounded-xl transition-all text-gray-600"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"icon"[39m
                  [36m/>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs mt-1"[39m
                  [36m>[39m
                    [0mAstrology[0m
                  [36m</span>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative flex flex-col items-center p-2 rounded-xl transition-all text-gray-600"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mdata-testid[39m=[32m"icon"[39m
                  [36m/>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xs mt-1"[39m
                  [36m>[39m
                    [0mEarnings[0m
                  [36m</span>[39m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<audio[39m
              [33mpreload[39m=[32m"auto"[39m
            [36m>[39m
              [36m<source[39m
                [33msrc[39m=[32m"/notification.mp3"[39m
                [33mtype[39m=[32m"audio/mpeg"[39m
              [36m/>[39m
            [36m</audio>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"quick-menu"[39m
            [36m>[39m
              [0mQuick Menu[0m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"video-call-component"[39m
            [36m>[39m
              [0mVideoCall Component[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      238 |
      239 |     // Should switch to video call view (Mock VideoCall component)
    > 240 |     await waitFor(() => {
          |                  ^
      241 |       // Tabs or specific view check.
      242 |       // The dashboard shows VideoCall component when activeCallRoomId is set and activeTab is 'calls'
      243 |       // Our accept logic sets these.

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/AstrologerDashboard.test.jsx:240:18)

  ‚óè AstrologerDashboard ‚Ä∫ offline status toggle works

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/api/astrologer/status", Anything, Anything

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white p-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"container mx-auto"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex justify-between items-center mb-6"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h1[39m
                        [33mclass[39m=[32m"text-2xl font-bold"[39m
                      [36m>[39m
                        [0mCosmic Dashboard[0m
                      [36m</h1>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-purple-200"[39m
                      [36m>[39m
                        [0mWelcome back, Master [0m
                        [0mAstro User[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center gap-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<button[39m
                          [33mclass[39m=[32m"relative p-2 hover:bg-white/20 rounded-full transition-colors"[39m
                        [36m>[39m
                          [36m<div[39m
                            [33mdata-testid[39m=[32m"icon"[39m
                          [36m/>[39m
                        [36m</button>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mdata-testid[39m=[32m"icon"[39m
                        [36m/>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white/20 backdrop-blur-sm rounded-2xl p-4 border border-white/30"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center justify-between"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center gap-3"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"w-4 h-4 rounded-full bg-green-400 animate-pulse"[39m
                        [36m/>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"font-semibold"[39m
                        [36m>[39m
                          [0mOnline & Available[0m
                        [36m</span>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-xs bg-green-500/30 px-2 py-1 rounded-full"[39m
                        [36m>[39m
                          [0müîî Incoming notifications enabled[0m
                        [36m</span>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative w-16 h-8 rounded-full cursor-pointer transition-colors duration-300 ease-in-out bg-green-500"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out translate-x-8"[39m
                        [36m/>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"container mx-auto px-4 -mt-6 mb-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-2xl font-bold text-purple-600"[39m
                    [36m>[39m
                      [0m0[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-xs text-gray-600"[39m
                    [36m>[39m
                      [0mPending Requests[0m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
                    [36m>[39m
                      [0m‚Çπ[0m
                      [0m5,000[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-xs text-gray-600"[39m
                    [36m>[39m
                      [0mEarnings[0m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
                    [36m>[39m
                      [0m4.8[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-xs text-gray-600"[39m
                    [36m>[39m
                      [0mRating[0m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"container mx-auto px-4 pb-20"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-4 gap-4 mb-8"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                    [36m>[39m
             ...

      267 |
      268 |     await waitFor(() => {
    > 269 |         expect(axios.put).toHaveBeenCalledWith(
          |                           ^
      270 |             expect.stringContaining('/api/astrologer/status'),
      271 |             expect.anything(),
      272 |             expect.anything()

      at toHaveBeenCalledWith (src/__tests__/AstrologerDashboard.test.jsx:269:27)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ‚óè AstrologerDashboard ‚Ä∫ Switching tabs changes view

    Found multiple elements with the text: /Pending Requests/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-xs text-gray-600"[39m
    [36m>[39m
      [0mPending Requests[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<h3[39m
      [33mclass[39m=[32m"text-xl font-bold text-gray-800"[39m
    [36m>[39m
      [0mPending Requests[0m
    [36m</h3>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"container mx-auto"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center mb-6"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-2xl font-bold"[39m
                    [36m>[39m
                      [0mCosmic Dashboard[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-purple-200"[39m
                    [36m>[39m
                      [0mWelcome back, Master [0m
                      [0mAstro User[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"relative p-2 hover:bg-white/20 rounded-full transition-colors"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mdata-testid[39m=[32m"icon"[39m
                        [36m/>[39m
                      [36m</button>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white/20 backdrop-blur-sm rounded-2xl p-4 border border-white/30"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center justify-between"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center gap-3"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"w-4 h-4 rounded-full bg-green-400 animate-pulse"[39m
                      [36m/>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-semibold"[39m
                      [36m>[39m
                        [0mOnline & Available[0m
                      [36m</span>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-xs bg-green-500/30 px-2 py-1 rounded-full"[39m
                      [36m>[39m
                        [0müîî Incoming notifications enabled[0m
                      [36m</span>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative w-16 h-8 rounded-full cursor-pointer transition-colors duration-300 ease-in-out bg-green-500"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out translate-x-8"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"container mx-auto px-4 -mt-6 mb-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-purple-600"[39m
                  [36m>[39m
                    [0m0[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mPending Requests[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m‚Çπ[0m
                    [0m5,000[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mEarnings[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-2xl p-4 shadow-lg text-center"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m4.8[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs text-gray-600"[39m
                  [36m>[39m
                    [0mRating[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"container mx-auto px-4 pb-20"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-4 gap-4 mb-8"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 "[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mdata-testid[39m=[32m"icon"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-xs font-semibold text-gray-700"[39m
                  [36m>[39m
                    [0mOverview[0m
                  [36m</div>[39m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"relative bg-white rounded-2xl p-4 shadow-lg text-center transition-all transform hover:scale-105 ring-2 ring-purple-500"[39m
                [36m>[39m
                  [36m<div[39m
                    ...

      296 |
      297 |     // Should see "Pending Requests" header or "Chat Requests" subtab
    > 298 |     await waitFor(() => {
          |                  ^
      299 |         expect(screen.getByText(/Pending Requests/i)).toBeInTheDocument();
      300 |     });
      301 |   });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/__tests__/AstrologerDashboard.test.jsx:298:18)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 3 passed, 6 total
Snapshots:   0 total
Time:        4.656 s
Ran all test suites matching src/__tests__/AstrologerDashboard.test.jsx.
